(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5619:(e,r,a)=>{Promise.resolve().then(a.bind(a,6833))},6833:(e,r,a)=>{"use strict";a.d(r,{default:()=>w});var t=a(7437),s=a(2265),i=a(3525);let o=(0,i.j)("rounded-lg overflow-hidden",{variants:{variant:{default:"bg-card shadow-card border border-border",problem:"bg-[#FAC4C4] border-2 border-black",green:"bg-[#D1FAE5] border-2 border-black"},padding:{none:"",sm:"p-4",md:"p-6",lg:"p-8"}},defaultVariants:{variant:"default",padding:"md"}});function n(e){let{children:r,variant:a,padding:s,className:i=""}=e;return(0,t.jsx)("div",{className:o({variant:a,padding:s,className:i}),children:r})}function l(e){let{children:r,variant:a="info",className:s=""}=e;return(0,t.jsx)("div",{className:"\n      p-4 rounded-lg border\n      ".concat({error:"bg-red-50 text-red-700 border-red-200",success:"bg-green-50 text-green-700 border-green-200",info:"bg-blue-50 text-primary border-primary-light"}[a],"\n      ").concat(s,"\n    "),children:r})}var d=a(2781);let c={maxSizeMB:10,acceptedTypes:["image/jpeg","image/png"]};function u(e){let{onImageSelect:r}=e,a=(0,s.useCallback)(e=>{e.length>0&&r(e[0])},[r]),{getRootProps:i,getInputProps:o,isDragActive:n}=(0,d.uI)({onDrop:a,accept:{"image/*":c.acceptedTypes},maxFiles:1,multiple:!1});return(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{...i(),className:"\n          border-2 border-dashed rounded-xl p-8\n          flex flex-col items-center justify-center\n          transition-colors cursor-pointer\n          min-h-[240px]\n          ".concat(n?"border-primary bg-primary/5":"border-border hover:border-primary hover:bg-card-hover","\n        "),children:[(0,t.jsx)("input",{...o()}),(0,t.jsx)("svg",{className:"w-12 h-12 mb-4 ".concat(n?"text-primary":"text-text-secondary"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("p",{className:"text-base font-medium text-text-primary",children:n?"Drop your image here":"Click to upload or drag and drop"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Supports ".concat(c.acceptedTypes.join(", ")," â€¢ Max ").concat(c.maxSizeMB,"MB")})]})]})})}var h=a(6648);function m(e){let{imageUrl:r,onRemove:a,showOriginal:i,originalUrl:o}=e,[n,l]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:"relative p-4",children:[(0,t.jsx)("div",{className:"aspect-[2/3] relative rounded-lg overflow-hidden bg-card-hover",children:(0,t.jsx)(h.default,{src:n&&o?o:r,alt:"Preview",layout:"fill",objectFit:"contain"})}),i&&o&&(0,t.jsx)("button",{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),className:"absolute bottom-6 left-6 px-3 py-1.5  bg-white/90 hover:bg-white rounded-md shadow-card text-sm text-text-secondary",children:"Show original"}),(0,t.jsx)("button",{onClick:a,className:"absolute top-6 right-6 p-2 rounded-full bg-white/90 hover:bg-white shadow-card hover:shadow-lg text-text-secondary hover:text-text-primary transition-all duration-200","aria-label":"Remove image",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}let p=(0,i.j)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{variants:{variant:{primary:"bg-primary-green text-white hover:bg-primary-green/90 focus:ring-primary-green/50",secondary:"bg-primary text-white hover:bg-primary-light focus:ring-primary/50",share:"bg-primary-rose text-white hover:bg-primary-rose/90 focus:ring-primary-rose/50",outline:"border-2 border-primary text-primary hover:bg-primary/10",default:"bg-primary-default text-white hover:bg-default/90 focus:ring-good/50"},size:{sm:"h-9 px-3 text-sm",md:"h-11 px-6 text-base",lg:"h-12 px-8 text-lg"},fullWidth:{true:"w-full"}},defaultVariants:{variant:"primary",size:"md",fullWidth:!1}});function g(e){let{children:r,variant:a,size:s,fullWidth:i,isLoading:o,className:n,...l}=e;return(0,t.jsxs)("button",{className:p({variant:a,size:s,fullWidth:i,className:n}),disabled:o||l.disabled,...l,children:[o&&(0,t.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),r]})}function b(e){let{progress:r,variant:a="default",className:s=""}=e;return(0,t.jsx)("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden ".concat(s),children:(0,t.jsx)("div",{className:"h-full transition-all duration-300 ease-in-out ".concat({default:"bg-primary",success:"bg-primary-green"}[a]),style:{width:"".concat(Math.min(100,Math.max(0,r)),"%")}})})}function x(e){let{phase:r,onProcess:a,onDownload:s}=e;return(0,t.jsx)("div",{className:"p-4",children:(()=>{switch(r){case"validating":return(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-primary border-t-transparent rounded-full"}),(0,t.jsx)("span",{className:"text-text-secondary",children:"Validating image..."})]});case"idle":return(0,t.jsx)(g,{variant:"share",fullWidth:!0,onClick:a,children:"Remove Background"});case"processing":return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(b,{progress:70}),(0,t.jsx)("p",{className:"text-center text-text-secondary",children:"Removing background..."})]});case"success":return(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(g,{variant:"secondary",fullWidth:!0,onClick:s,children:"Download"}),(0,t.jsx)(g,{variant:"share",fullWidth:!0,children:"Share"})]});case"error":return(0,t.jsx)(g,{variant:"outline",fullWidth:!0,onClick:a,children:"Try Again"});default:return null}})()})}let v=["image/jpeg","image/png"],f={width:600,height:600};async function y(e){let r=[];e.size>0xa00000&&r.push({code:"FILE_SIZE",message:"Image size should be less than 10MB"}),v.includes(e.type)||r.push({code:"FILE_TYPE",message:"Only JPEG and PNG files are accepted"});try{let a=await new Promise((r,a)=>{let t=new Image;t.src=URL.createObjectURL(e),t.onload=()=>{URL.revokeObjectURL(t.src),r({width:t.width,height:t.height})},t.onerror=()=>{URL.revokeObjectURL(t.src),a(Error("Failed to load image"))}});(a.width<f.width||a.height<f.height)&&r.push({code:"IMAGE_DIMENSIONS",message:"Image dimensions should be at least 600x600 pixels"})}catch(e){r.push({code:"GENERAL",message:"Failed to validate image dimensions"})}if(r.length>0)throw r}async function j(e){try{let r=new FormData;r.append("file",e);let a=await fetch("https://photo-processor-backend-api.azurewebsites.net",{method:"POST",body:r,headers:{Accept:"application/json"},credentials:"omit"});if(!a.ok){let e=await a.json();throw Error(e.detail||"Failed to remove background")}let t=await a.blob();return URL.createObjectURL(t)}catch(e){throw console.error("Error removing background:",e),Error("Failed to process image")}}function w(){let[e,r]=(0,s.useState)(null),[a,i]=(0,s.useState)("idle"),[o,d]=(0,s.useState)([]),c=async e=>{d([]),i("validating");try{await y(e);let a=URL.createObjectURL(e);r({file:e,preview:a}),i("idle")}catch(e){Array.isArray(e)?d(e):d([{code:"GENERAL",message:"Failed to process image"}]),i("error")}},h=async()=>{if(null==e?void 0:e.file)try{i("uploading"),await new Promise(e=>setTimeout(e,1e3)),i("processing");let a=await j(e.file);r(e=>e?{...e,processed:a}:null),i("success")}catch(e){i("error"),d([{code:"GENERAL",message:"Failed to remove background. Please try again."}])}},p=async()=>{if(null==e?void 0:e.processed)try{let r=document.createElement("a");r.href=e.processed,r.download="processed-image.png",document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(e){d([{code:"GENERAL",message:"Failed to download image"}])}},g=(null==e?void 0:e.processed)||(null==e?void 0:e.preview);return(0,t.jsxs)(n,{className:"w-full border-4 border-primary-green",children:[o.length>0&&(0,t.jsx)("div",{className:"p-4",children:o.map((e,r)=>(0,t.jsx)(l,{variant:"error",className:"mb-2 last:mb-0",children:e.message},r))}),e?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(m,{imageUrl:g,onRemove:()=>{(null==e?void 0:e.preview)&&URL.revokeObjectURL(e.preview),(null==e?void 0:e.processed)&&URL.revokeObjectURL(e.processed),r(null),i("idle"),d([])},showOriginal:!!e.processed,originalUrl:e.preview}),(0,t.jsx)(x,{phase:a,onProcess:h,onDownload:p})]}):(0,t.jsx)(u,{onImageSelect:c})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[483,130,215,744],()=>r(5619)),_N_E=e.O()}]);